(function(f,u){typeof exports=="object"&&typeof module<"u"?module.exports=u():typeof define=="function"&&define.amd?define(u):(f=typeof globalThis<"u"?globalThis:f||self,f["@mundoit-lib/plugin-vue-event"]=u())})(this,function(){"use strict";function f(n){return{all:n=n||new Map,on:function(o,s){var t=n.get(o);t?t.push(s):n.set(o,[s])},off:function(o,s){var t=n.get(o);t&&(s?t.splice(t.indexOf(s)>>>0,1):n.set(o,[]))},emit:function(o,s){var t=n.get(o);t&&t.slice().map(function(e){e(s)}),(t=n.get("*"))&&t.slice().map(function(e){e(o,s)})}}}function u(n){let o=!1;typeof n.version=="string"&&n.version.startsWith("3.")&&(o=!0);const s=f(),t={emit(e,...i){s.emit(e,i)},on(e,i){const r=c=>i(...c);return s.on(e,r),r},fire(e,...i){s.emit(e,i)},off(e,i){s.off(e,i)}};o?(n.config.globalProperties.$events=t,n.mixin({beforeCreate(){if(typeof this.$options.events=="object"){this._eventListeners=[];for(const[e,i]of Object.entries(this.$options.events)){const r=i.bind(this),c=t.on(e,r);this._eventListeners.push({event:e,listener:c})}}},beforeUnmount(){if(this._eventListeners)for(const{event:e,listener:i}of this._eventListeners)t.off(e,i)}})):(Object.defineProperty(n.prototype,"$events",{get(){return t}}),n.mixin({beforeCreate(){if(typeof this.$options.events=="object"){this._eventListeners=[];for(const[e,i]of Object.entries(this.$options.events)){const r=i.bind(this),c=t.on(e,r);this._eventListeners.push({event:e,listener:c})}}},beforeDestroy(){if(this._eventListeners)for(const{event:e,listener:i}of this._eventListeners)t.off(e,i)}}))}return u});
